# Final Report

## Background
The project was inspired from a common problem working class adults in Singapore's Central Business District (CBD) faced - where and what to eat for lunch. Daily, the working crowd in CBD look forward to their meal times to recharge and perhaps to catch up with fellow colleagues. However, given the numerous food choices and a lack of time to research on where and what to eat, most people have difficulty deciding their meals. Some have resorted to generating random places to eat using Microsoft Excel. This project aims to suggest places to eat through a chatbot, in order to provide an interactive user experience and to enable the user to make a more informed choice. The chatbot will be built using Natural Language Processing (NLP) techniques.

## Motivation
Chatbots, through Natural Language Processing (NLP), is an attractive method of human-computer interaction due to the interactivity as compared to traditional mediums such as a Frequently Asked Questions (FAQ) section on a website. It has been used in a variety of domains such as environment and sustainable development [1], education [2] and other commercial purposes [3]. The fact that chatbots are not widely used in Singapore for food and restaurants recommendations makes it an obvious primary choice for us to develop one which is specific to Singapore. Furthermore, creating relevant and appropriate response leveraging on various NLP techniques is a tough but critical component to a successful chatbot. Hence, we decided to take on the challenge of developing one. There are also several use cases or scenarios which we think will be immediately useful. They are: 

* Tying up with business to provide exposure as well as a source of revenue (e.g. incentives/discounts). 
* Letting users to have a quick and easy access to information about food places in their vicinity.
* Letting users can subscribe to this service to receive information about trending restaurants based on their preferences communicated to the chatbot
* Providing some entertainment (localized humour) when choosing where to eat.
* Providing other information about food location by complementing current data with other data sources such as Google visitor information (e.g. Popular time, live visits, duration).
* Generating revenue through advertisements within App.

## About the Data
This section describe the data set that we will be using for the project, including a high level overview of how the data is retrieved and preprocessed. It also contains key statistics about the data.

Locations used to query Yelp: City Hall, Raffles Place, Bras Basah, Dhoby Ghaut

The number of records for each entity is provided below:

Businesses | Reviews | Statements | Cuisines | Foods | Places
--- | --- | --- | --- | --- | ---
2590 | 17235 | 171906 | 1740 | 1088 | 985

## Analytics Tasks 
Here we describe the analytics tasks involved in building the chatbot. The chatbot primarily deals with information extraction and document retrieval. Depending on the quality of the topics discovered within the reviews, we aim to also incorporate topic analysis in the development of the chatbot. Each of the task is elaborated below.

**Information Extraction** - The objective of this task is to make sense of the input provided by the user. Part-of-speech tagging and detecting entities such as foods, locations and cuisines are part of this task.

**Document Retrieval** - In formulating the response, the chatbot will perform document retrieval from the database to get the list of restaurants most relevant to the user's input. The chatbot will also provide additional information such as a statement from a review to the user to help them make their choice. The database contains a list of known restaurants, and their respective reviews.

**Topic Analysis** - We aim to discover themes in reviews and use that information to further make the response more relevant and to aid the document retrieval task. The topic most probable as determined by the words in the user's input will serve as filter to filter reviews on the topic. The second filter will be to select a statement from the filtered reviews based on distance measures such as cosine similarity and Jaccard.

## Approach

Training | Description
--- | ---
Gather restaurants reviews and businesses data from Yelp | Use api and web scraping to scrape all reviews about all restaurants in Singapore. Each review is written and stored in a separate file that is later used for further processing
Prepare database | Build the knowledge base of the chatbot using reviews and businesses data.
Prepare the corpus | Create a list of “generic responses”, “greetings”, “self descriptions” and “singlish words" dictionary that will form the vocabulary of the chatbot.
Prepare review topics | Perform LDA to come up with a distribution of topics and subsequently most likely topic that each review belongs to so that it can be used to refine responses generated by the chatbot.

Execution | Description
--- | ---
Input Parsing | Every statement entered by the user is tokenized, lemmatized and part-of-speech tagged. 
State Machine | To keep track of the context of a conversation, for example, where the user want to eat or the user's current location
Document Retrieval | To get response of the most relevant “business” stored in the database during training phase. Also employs comparison methods like “Jaccard”, “Cosine” or “Levenshtein” on the processed corpus in the database to come up with the relevant information.
Responder | Respond to user's input by performing the above tasks and returning a relevant response. For example, it uses a dictionary lookup of the greetings if the user is greeting the bot, or ask for more information or construct an alternative response if it does not understand the user's input.

#### Bot Architecture 

* include architecture diagram

#### Python Classes
**jiakbot**
* main bot class

**Parsing**
* The Parser is meant to tokenize the user's input, remove stopwords and identify and tag appropriate part-of-speech to each word. This is necessary for State Machine to monitor the conversation.

**State Machine** 
* The State Machine class is meant to keep track of the context of a conversation, in particular:
    * Where the user want to eat or the user's current location
    * What kind of food cuisine the user is looking for
    * What sort of food the user is looking for
* The State Machine relays the state information and/or status to the Responder to either prompt the user for more information and/or provide the user with a list of recommendations retrieved from the business and food database.

**Responder**
* The main Responder class handles all response construction.
* Points the flow in two main directions:
    * Information retrieval from the database
        * Construct an alternative response if a non-food query is detected
    * The Responder class makes use of several other classes to handle greetings, and other non-food related topics that are detected in the conversation

**Retriever**
* The Retriever function is meant to query the database based on the data provided by the Responder and return a relevant set of information for the Responder class to utilize
* The Retriever function conducts 4 main steps:
    * Simple SQL statements used to extract the related data from the database based on data (query) provided by Responder
    * Reference the tokens: Compare using cosine similarity to get most relevant statement 
    * Convert set of statement(s) into dictionary
    * Return dictionary to Responder class

**Trainer/ Topic_finder**
* insert content 

## Results and Findings
* Defining good response?
* Defining accuracy?

## Discusssions


## References
[1] AluxBot - A Chatbot that Encourages the Care for the Environment. (2016). International Journal of Computer Science Issues, 13(6), 120-123.

[2] Yi Fei Wang, & Stephen Petrina. (2013). Using Learning Analytics to Understand the Design of an Intelligent Language Tutor – Chatbot Lucy. International Journal of Advanced Computer Science and Applications, 4(11), 124-131.

[3] Chatbots Raise Questions About the Future of Customer Service. (2016, April 27). PR Newswire, p. PR Newswire, Apr 27, 2016.


